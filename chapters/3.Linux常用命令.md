---
title: Linux常用命令
date: '2022/9/12 10:02:25'
top_img: 'https://pic.hycbook.com/i//hexo/post_imgs/蕾姆2.webp'
cover: 'https://pic.hycbook.com/i//hexo/post_cover/蕾姆2.webp'
categories:
  - common
tags:
  - linux指令
abbrlink: 48230
---


---

# linux常用指令

> [linux指令入门](http://www.linuxso.com/command/)

## 文件类

> 远程拷贝文件(-P 是指定端口，-r 是循环复制)

```cmd
scp -P port -r root@192.168.2.1:/home/hyc/test /home/hyc/
```

> 文件权限



> 删除文件



> 删除文件夹



> 移动或更名



> 查找搜索: 寻找特定档案：find、locate、whereis

按照文件名搜索

```cmd
# 语法: find 搜索路径 [选项] 搜索内容
find / -name label_studio.sqlite3
```

选项：

- -name: 按照文件名搜索
- -iname: 按照文件名搜索，不区分文件名大小
- -inum: 按照 inode 号搜索

按照文件类型搜索

```cmd
# 语法: find 搜索路径 [选项] 搜索内容
find /home -type d -name huangyc
```

选项:

- -type d：查找目录
- -type f：查找普通文件
- -type l：查找软链接文件

寻找【执行挡】：which

> 查看文件夹及子目录下文件数量

```cmd
[root@uslave02 datasets]# ls -lR /home/hyc/ | grep -E ".jpg|.png|.jpeg|.jpe" |wc -l
6599
```



## 磁盘类

> 查看某个文件或目录占用磁盘空间的大小(需要进入到当前目录)

``` sh
du -ah --max-depth=1
```

> 查看全局文件系统磁盘占用

``` sh
df -h
```

> 查看当前路径下 各文件夹的磁盘占用

```sh
du -sh *
```

## 防火墙

### 端口类

> 防火墙

```sh
# 重启防火墙
firewall-cmd --reload

# 关闭端口（关闭后需要要重启防火墙才生效）
firewall-cmd --zone=public --remove-port=3338/tcp --permanent

# 开机启动防火墙
systemctl enable firewalld

# 开启防火墙
systemctl start firewalld

# 查看防火墙状态
firewall-cmd --state

# 禁止防火墙开机启动
systemctl disable firewalld

# 停止防火墙
systemctl stop firewalld
```

> 查看端口占用

```sh
# 查看已开放的端口
firewall-cmd --list-ports

# 或
# yum install net-tools
netstat -atunlp
```

![img](https://pic.hycbook.com/i/hexo/bk_resources/common/3.Linux常用命令/image-20200328210123194.webp)

> 开启端口

```sh
# 开放端口（开放后需要要重启防火墙才生效）
firewall-cmd --zone=public --add-port=3338/tcp --permanent
# 配置立即生效
firewall-cmd --reload
```



### win端口

> 拓展下windows下的端口查找和kill操作

```cmd
C:\Users\Administrator>netstat -aon | findstr "4000"
  TCP    0.0.0.0:4000           0.0.0.0:0              LISTENING       12128
  TCP    127.0.0.1:4000         127.0.0.1:57174        TIME_WAIT       0
  TCP    127.0.0.1:4000         127.0.0.1:57175        TIME_WAIT       0
  TCP    [::]:4000              [::]:0                 LISTENING       12128

C:\Users\Administrator>tasklist|findstr "12128"
node.exe                     12128 Console                    3    141,152 K

C:\Users\Administrator>taskkill /T /F /PID 12128
成功: 已终止 PID 12128 (属于 PID 24224 子进程)的进程。
```

## 进程类

> `杀死指定进程`

![img](https://pic.hycbook.com/i/hexo/bk_resources/common/3.Linux常用命令/image-20200328210327497.webp)
### 批量杀死进程

> 查看进程号

```shell
[root@iZ2zeh6nc313zs4azjijjnZ ~]# ps -ef | grep gitbook | grep -v grep|awk '{print $2}'
24064
29387
30425
```

> 方式一：batch_shell

```shell
#!/bin/sh
dsp_admin_id=`ps -ef | grep gitbook | grep -v grep|awk '{print $2}'`
echo $dsp_admin_id
for id in $dsp_admin_id
do
    kill -9 $id  
    echo "killed $id" 
done
```

> 方式二：单行执行

```shell
#!/bin/sh
ps -ef | grep gitbook | grep -v grep|grep 4000|  awk '{print $2}' | xargs kill -9
```

## 解压缩

> 压缩

```sh
tar -cvf jpg.tar *.jpg //将目录里所有jpg文件打包成jpg.tar
tar -czf jpg.tar.gz *.jpg //将目录里所有jpg文件打包成jpg.tar后，并且将其用gzip压缩

rar a jpg.rar *.jpg //rar格式的压缩，需要先下载rar for linux

zip jpg.zip *.jpg //zip格式的压缩，需要先下载zip for linux
```

> 解压缩

```sh
tar -xvf file.tar -C DestPath 1.txt //解压 tar包  1.txt表示只需要解压出这个文件,默认解压所有
tar -xzvf file.tar.gz //解压tar.gz
tar -xjvf file.tar.bz2 //解压 tar.bz2
tar -xZvf file.tar.Z //解压tar.Z

unrar e file.rar DestPath //解压rar

unzip file.zip //解压zip
```

## 日期时间

> 显示日期

```cmd
[root@iZ2zeh6nc313zs4azjijjnZ ~]# date
2022年 03月 12日 星期六 10:57:52 CST
```

> 显示日历

```cmd
[root@iZ2zeh6nc313zs4azjijjnZ ~]# cal
      三月 2022     
日 一 二 三 四 五 六
       1  2  3  4  5
 6  7  8  9 10 11 12
13 14 15 16 17 18 19
20 21 22 23 24 25 26
27 28 29 30 31
```

## 环境变量

在CentOS操作系统中，您可以使用几种方式来设置环境变量。以下是其中一些常见的方法：

> /etc/profile文件

通过/etc/profile文件：在CentOS中，可以编辑`/etc/profile`文件来设置系统范围的环境变量。打开该文件并在文件末尾添加您想要设置的环境变量，例如：

```cmd
export MY_VARIABLE=/path/to/my/directory
```

保存文件后，重新登录或运行`source /etc/profile`以使更改生效

> ~/.bash_profile或~/.bashrc

通过~/.bash_profile或~/.bashrc文件：每个用户可以在其主目录中的`.bash_profile`或`.bashrc`文件中设置个人环境变量。这些文件会在用户登录时自动加载。打开其中一个文件，并在文件末尾添加类似的行：

```cmd
export MY_VARIABLE=/path/to/my/directory
```

保存文件后，注销并重新登录，或者使用命令`source ~/.bash_profile`（或`source ~/.bashrc`）来加载更改

> /etc/environment文件

通过/etc/environment文件：可以编辑`/etc/environment`文件来设置系统范围的全局环境变量。该文件包含逐行的"key=value"对。例如：

```cmd
MY_VARIABLE=/path/to/my/directory
```

保存文件后，重新登录或重启系统以使更改生效

> 命令行临时设置

可以在命令行中临时设置环境变量，仅对当前会话有效。使用以下语法：

```cmd
export MY_VARIABLE=/path/to/my/directory
```

这将在当前会话中设置环境变量，但在注销或重新启动后不会保留

请注意，设置环境变量后，您可能需要重新启动相关应用程序或终端窗口，以便它们能够读取新的环境变量值



## 后台执行

> [cloudreve私有云盘配置后台运行](https://blog.csdn.net/longzhoufeng/article/details/108958091)
>
> systemctl方式

```cmd
vi /usr/lib/systemd/system/cloudreve.service

# 输入以下内容，注意最好别带中文
[Unit]
Description=Cloudreve
Documentation=https://docs.cloudreve.org
After=network.target
Wants=network.target

[Service]
Type=simple
WorkingDirectory=/home/software/cloudreve
ExecStart=/home/software/cloudreve/cloudreve
Restart=on-abnormal
RestartSec=5s
KillMode=mixed

StandardOutput=null
StandardError=syslog

[Install]
WantedBy=multi-user.target
```

更新重启服务

```cmd
# 更新配置
systemctl daemon-reload

# 启动服务
systemctl start cloudreve

# 设置开机启动
systemctl enable cloudreve
```

管理命令

```cmd
# 启动服务
systemctl start cloudreve

# 停止服务
systemctl stop cloudreve

# 重启服务
systemctl restart cloudreve

# 查看状态
systemctl status cloudreve
```



> nohup方式

```cmd
nohup python run.pt > log.log &
```

## svn基本使用

> centos安装svn客户端

```bash
# 安装svn客户端
yum install mod_dav_svn

# 查看当前svn的版本
svnserve --version
```

> 拉取项目(已存在)

```bash
svn checkout svn://10.10.13.13
```

> 提交上传文件

```bash
svn add <文件路径>

svn commit -m "提交说明" <文件路径>
```

如果要提交整个目录下的所有文件，可以将 `<文件路径>` 替换为目录的路径

> 更新文件

checkout只在第一次链接时使用一次，以后如果进行更新操作请使用update指令



# 系统级

> 版本信息

```cmd
[root@iZ2zeh6nc313zs4azjijjnZ ~]# uname -r
3.10.0-1062.12.1.el7.x86_64
[root@iZ2zeh6nc313zs4azjijjnZ ~]# lsb_release -a
LSB Version:    :core-4.1-amd64:core-4.1-noarch
Distributor ID: CentOS
Description:    CentOS Linux release 7.7.1908 (Core)
Release:        7.7.1908
Codename:       Core
```

> 软链接

`ln`是linux中又一个非常重要命令，它的功能是为某一个文件在另外一个位置建立一个同步的链接

当我们需要在不同的目录，用到相同的文件时，我们不需要在每一个需要的目录下都放一个必须相同的文件

我们只要在某个固定的目录，放上该文件，然后在 其它的目录下用ln命令链接(link)它就可以，不必重复的占用磁盘空间

这个命令最常用的参数是-s,具体用法是：ln -s 源文件 目标文件

* 报错例子

  ```sh
  ImportError: /lib64/libstdc++.so.6: version `GLIBCXX_3.4.21' not found (required by /home/anaconda/install/envs/stk37/lib/python3.7/site-packages/pandas/_libs/window/aggregations.cpython-37m-x86_64-linux-gnu.so)
  ```

* 解决方案

  ```sh
  # 查找lib库
  sudo find / -name "libstdc++.so.6*"
  # 从上述列表里找一个路径，查看是否存在我们需要的'GLIBCXX_3.4.21'
  strings /home/anaconda/lib/x86_64-conda_cos6-linux-gnu/sysroot/lib/libstdc++.so.6 |grep GLIBCXX_3.4.21
  # 如果存在的话，建立软链接到我们需要的地方，这里例子里是/lib64/libstdc++.so.6
  ln -s /home/anaconda/lib/x86_64-conda_cos6-linux-gnu/sysroot/lib/libstdc++.so.6 /lib64/libstdc++.so.6
  # 注意如果/lib64/libstdc++.so.6 已经存在，此时上述命令会报错，需要先备份后删除，再执行ln，(但是里面没有我们需要的'GLIBCXX_3.4.21'，可以用strings查看)
  cp /lib64/libstdc++.so.6 /lib64/libstdc++.so.6_bak
  rm /lib64/libstdc++.so.6
  ln -s /home/anaconda/lib/x86_64-conda_cos6-linux-gnu/sysroot/lib/libstdc++.so.6 /lib64/libstdc++.so.6
  # 至此完成软链接配置
  ```

  

# 代理配置

{% tabs 代理配置 %}
<!-- tab 系统代理 -->

修改配置文件`/etc/profile`，即可配置centos通过代理进行上网

```sh
# 编辑配置文件
vi /etc/profile
# 添加代理服务器ip地址和端口号
export http_proxy=http://192.168.xx.xx:port
export https_proxy=http://192.168.xx.xx:port
export ftp_proxy=$http_proxy

# 使配置文件生效
source /etc/profile
```

<!-- endtab -->

<!-- tab yum代理 -->

在`/etc/yum.conf`后面添加以下内容

```sh
# 编辑配置文件
vi /etc/yum.conf
proxy=http://127.0.0.1:8080

# 使配置文件生效
source /etc/yum.conf
```

<!-- endtab -->

<!-- tab wget代理 -->

编辑配置文件`/etc/wgetrc`添加下面两行

```sh
# 编辑配置文件
vi /etc/wgetrc
http_proxy=http://127.0.0.1:8080
https_proxy=http://127.0.0.1:8080

# 使配置文件生效
source /etc/wgetrc
```

<!-- endtab -->

{% endtabs %}



# 包管理

> 安装 RPM 包

```sh
sudo rpm -ivh --prefix=<installation_path> <package_name>
```

`--prefix`为可选项，用于指定安装路径。如不设置，系统会将安装到默认路径
